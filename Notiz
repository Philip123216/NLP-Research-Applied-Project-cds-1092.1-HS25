Notiz – Wikipedia Contradiction Experiment (Ollama)

Zum ausführen:
> prompts.py & experiment.py anpassen. Ich habe mit ChatGPT da jetzt einfach irgendwas gemacht. Siehe unten kurze Beschreibung
> Ollama installieren falls noch nicht (https://ollama.com/)
> In Powershell in Projektordner wechseln
> In Powershell:
python -m venv .venv

.venv\Scripts\Activate.ps1

pip install requests pandas

ollama pull llama3.2:3b
# oder anderes modell, ich hab jetzt das hier drin in config.py

> Neues Terminal starten & nach ausführen offen lassen
ollama serve

> Experiment starten
python src/run_experiment.py





Dateien und Zweck:
* `config.py`
  → Zentrale Einstellungen: Modellname (z.B. `llama3.2:3b` oder `qwen2.5:7b`), HF-Dataset-Infos, Output-Pfade.

* `data_fetch.py`
  → Holt das HuggingFace-Dataset über die API, baut ein DataFrame mit `id, question, text_a, text_b, contradict_type, same_passage`
  → Speichert `wikicontradict_pairs.csv`.

* `prompts.py`
  → Definiert den Systemprompt, das Prompt-Template für Aussage A/B und das JSON-Schema für die strukturierte LLM-Antwort.

* `llm_client.py`
  → Schickt den Prompt an Ollama (`http://localhost:11434/api/chat`), parst die JSON-Antwort und gibt sie als Python-dict zurück.

* `experiment.py`
  → Iteriert über alle Paare, ruft für jedes das LLM auf, sammelt die Resultate und speichert sie als
  `wikicontradict_llm_results.csv` und `wikicontradict_llm_results.jsonl`.

* `analysis.py`
  → Macht eine einfache Auswertung:

  * Wie oft sagt das Modell `contradiction = yes`?
  * Wie oft wählt es A/B, obwohl es sagt, es könne nicht entscheiden?
  * Bias Richtung A oder B.

* `run_experiment.py`
  → Haupt-Einstiegspunkt:

  1. Ruft `fetch_hf_rows` und `build_pairs_df` auf
  2. Startet das Experiment (`run_experiment`)
  3. Führt die Auswertung (`simple_analysis`) aus.

Ausführung (Konsole):

1. Ollama installieren und Modell ziehen, z.B.:

   * `ollama pull llama3.2:3b`
2. Ollama-Server starten:

   * `ollama serve`
3. Im Projektordner das Experiment starten:

   * `python run_experiment.py`
